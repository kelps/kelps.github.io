---
layout: blogger
title: .NET Client Profile “troll” e suas mensagens incorretas de erro de referência
date: 2012-08-13T15:27:00.0010000-03:00
permalink: /:year/:month/:slug:output_ext
tags: [Visual Studio, Visual Studio 2012, Visual Studio 2010]
---
<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="Target Profiles disponíveis no Visual Studio 2012" border="0" alt="Target Profiles disponíveis no Visual Studio 2012" src="http://lh6.ggpht.com/-24zEIySSnC8/UClHBL74mNI/AAAAAAAABFI/t7AnZ7iZyZU/image%25255B10%25255D.png?imgmax=800" width="662" height="289"></p> <p>Este é um pequeno erro meio troll do .NET que já me pegou desprevinido algumas vezes e hoje “atacou” outro desenvolvedor aqui da equipe.</p> <!--more--> <p>A partir do .NET Framework 3.5 foi criado um novo target de compilação chamado “.NET Framework 3.5 Client Profile”, que nada mais é do que um subset do .NET completo, com objetivo de permitir criar aplicações que podem ser instaladas mais rapidamente em computadores que não tenham o .NET 3.5 instalado pois precisam de apenas uma parte dele. Em teoria a idéia é muito boa e válida para produtos que serão distribuidos pela web, mas acaba sendo desnecessário na grande maioria dos casos. Projetos feitos usando esse “<a href="http://msdn.microsoft.com/en-us/library/cc656912.aspx" target="_blank">.NET Framework 4 Client Profile</a>” têm as seguintes limitações:</p> <ul> <li>Só podem fazer referencias a outros projetos que também sejam Client Profile</li> <li>Não podem ter nenhuma dependencia de .ASP.NET</li> <li>Não podem usar WCF Avançado</li> <li>Não podem fazer uso de MSBuild em runtime</li></ul> <p>Mas o que me faz chamar essa funcionalidade de troll é que vários templates de projeto do Visual Studio 2010 usam o Client Profile como padrão (WPF, Windows Forms, Console, Windows Service, Empty Project …). Então em nossa solution nós temos uma class library contendo todos os objetos da aplicação e mapeamento do banco de dados e outra class library com todas as regras de negócio, mas quando criamos uma aplicação Console que faria algumas rotinas batch, ela dava <strong>erro de compilação dizendo que não havia conseguido achar a classe da regra de negócios, apesar de a referencia estar correta e o intellisense mostrar todos os métodos</strong>. Aparentemente esses templates de projeto não usam mais o “cliente profile” por padrão no Visual Studo 2012.</p> <p>Então, se você criar um projeto não ASPNET, em .NET 3.5 ou 4.0, fizer referencia(s) a outro(s) projetos mas receber um erro de classe ou referencia não encontrado, verifique se o seu projeto não está usando o Cliente Profile. Isso pode lhe poupar bastante tempo e frustração.</p>  
