---
layout: blogger
title: Behavior para filtrar galerias Deep Zoom por tags
date: 2010-06-11T11:59:00.0010000-03:00
permalink: /:year/:month/:slug:output_ext
tags: [Deep Zoom, Beta, Expression Gallery, Silverlight 4, Behavior, Download]
---
<p>Acabei de publicar no <a title="Microsoft Expression Gallery" href="http://gallery.expression.microsoft.com" target="_blank">Expression Gallery</a> uma <a title="Deep Zoom Tag Filter Behavior" href="http://gallery.expression.microsoft.com/en-us/DeepZoomTagFilter" target="_blank">behavior para filtrar imagens em uma colleção do Deep Zoom</a>.</p>  <p><a href="http://lh6.ggpht.com/_33jXBude3Pw/TBJPTCYvn7I/AAAAAAAAA0E/BSkaZkt2WFQ/s1600-h/image%5B4%5D.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://lh3.ggpht.com/_33jXBude3Pw/TBJPWE4c7XI/AAAAAAAAA0I/eAWpgqFuR7U/image_thumb%5B2%5D.png?imgmax=800" width="639" height="438" /></a> </p>  <p>Essa behavior, quando aplicada a um objeto do tipo MultiScaleImage, permite que se filtre as imagens dessa coleção de forma semelhante ao que acontece no site <a title="Memorabilia Hard Rock" href="http://memo.hardrock.com" target="_blank">Memorabilia do HardRock Café</a>. </p>  <p>O uso da behavior é muito simples:</p>  <ul>   <li>Anexe a behavior à um objeto MultiScaleImage.</li>    <li>Defina as propriedades Source e MetadataUri da behavior respectivamente para a url da galeria e o arquivo de metadados da galeria.</li>    <li>Defina o valor da propriedade Filter da behavior para o filtro que quer aplicar.</li> </ul>  <p>A behavior trabalha com o arquivo de metadados gerado pelo Deep Zoom Composer para saber quais tags estão associadas a cada imagem. Ela entende tags separadas por vírgula (,) tanto para atribuir às imagens quanto para filtrar. Filtrar por múltiplas tags vai exibir todas as imagens que tenham pelo menos uma das tags do filtro.</p>  <p>O arquivo de metadados não precisa ser necessáriamente o mesmo gerado pelo Composer, mas deve ter o mesmo formato. A behavior o campo ZOrder do arquivo de metadados para saber qual é cada imagem, portanto, se esse arquivo for gerado manualmente deve se tomar o cuidado de garantir que estão sendo atribuídas as tags às imagens certas e sempre que a galeria for atualizada o arquivo de metadados também precisará ser atualizado.</p>  <p>A behavior também expõe uma propriedade (AvailableTags) que é um array contendo todas as tags disponíveis na galeria atual. Isso pode ser bem útil se quisermos exibir na tela todas as tags, como fiz no exemplo que está no Expression Gallery.</p>  <p>Cada vez que o filtro for alterado, a galeria será filtrada e ocorrerá uma animação para exibir as imagens desejadas. É possível controlar o tempo dessa animação e sua função de Easing.</p>  <p>As imagens são posicionadas de forma a preecher o espaço do controle da melhor forma possível, mas ainda preciso melhorar a lógica para quando apenas uma imagem é exibida.</p>  <p>Também há espaço para melhorias no algorítmo de posicionamento, no que diz respeito ao alinhamento das imagens do lado direito.</p>  <p>O código fonte está <a href="http://cnzklibrary.codeplex.com/" target="_blank">disponível no Codeplex</a>. Sugestões, melhorias e bug fixes podem ser reportados lá ou aqui no blog.</p>  <p>Em breve estarei aumentando essa biblioteca do Codeplex com outras behaviors e helpers.</p>  <p>Ahhh, quem gosta de futebol pode ver essa behavior em ação em <a href="http://www.msnnacopa.com.br">http://www.msnnacopa.com.br</a>. </p>  
